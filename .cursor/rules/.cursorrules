# Unity MCP å·¥å…·è§„åˆ™ (mcp_rules)

è¿™ä¸ªæ–‡ä»¶åŒ…å«Unity MCPæœåŠ¡å™¨ä¸­æ‰€æœ‰å¯ç”¨å·¥å…·çš„è¯¦ç»†è§„åˆ™å’Œä½¿ç”¨æ–¹æ³•ã€‚é™¤äº†é€šç”¨çš„`function_call`å·¥å…·å¤–ï¼Œå…¶ä»–æ‰€æœ‰ä¸“ä¸šå·¥å…·éƒ½åœ¨æ­¤å¤„è¯¦ç»†è¯´æ˜ã€‚

## ğŸ”§ å¯ç”¨å·¥å…·æ¦‚è§ˆ

1. **functions_call** - æ‰¹é‡å‡½æ•°è°ƒç”¨å·¥å…·
2. **execute_menu_item** - Unityç¼–è¾‘å™¨èœå•æ‰§è¡Œå·¥å…·
3. **manage_asset** - Unityèµ„äº§ç®¡ç†å·¥å…·
4. **manage_editor** - Unityç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†å·¥å…·
5. **manage_gameobject** - GameObjectç®¡ç†å·¥å…·
6. **manage_scene** - Unityåœºæ™¯ç®¡ç†å·¥å…·
7. **manage_script** - C#è„šæœ¬ç®¡ç†å·¥å…·
8. **read_console** - Unityæ§åˆ¶å°è¯»å–å·¥å…·

---

## 1. ğŸ“¦ functions_call - æ‰¹é‡å‡½æ•°è°ƒç”¨å·¥å…·

**åŠŸèƒ½**: æŒ‰é¡ºåºæ‰§è¡Œå¤šä¸ªUnityå‡½æ•°è°ƒç”¨å¹¶æ”¶é›†æ‰€æœ‰è¿”å›å€¼ã€‚

### å‚æ•°
- `function_calls` (string): å‡½æ•°è°ƒç”¨åˆ—è¡¨çš„JSONå­—ç¬¦ä¸²

### å‚æ•°æ ¼å¼
```json
[
    {
        "func": "Function1",
        "args": "{\"param1\": \"value1\"}"
    },
    {
        "func": "Function2",
        "args": "{\"param2\": 123}"
    }
]
```

### è¿”å›å€¼æ ¼å¼
```json
{
    "success": bool,
    "results": [result1, result2, ...],
    "errors": [error1, error2, ...],
    "total_calls": int,
    "successful_calls": int,
    "failed_calls": int
}
```

### ä½¿ç”¨ç¤ºä¾‹
```python
functions_call(
    function_calls='[
        {
            "func": "CreateGameObject",
            "args": "{\\"name\\": \\"Player\\", \\"tag\\": \\"Player\\"}"
        },
        {
            "func": "AddComponent",
            "args": "{\\"target\\": \\"Player\\", \\"component\\": \\"Rigidbody\\"}"
        }
    ]'
)
```

---

## 2. ğŸ¯ execute_menu_item - Unityç¼–è¾‘å™¨èœå•æ‰§è¡Œå·¥å…·

**åŠŸèƒ½**: æ‰§è¡ŒUnityç¼–è¾‘å™¨ä¸­çš„èœå•å‘½ä»¤ã€‚

### å‚æ•°
- `menu_path` (string, å¿…éœ€): èœå•é¡¹çš„å®Œæ•´è·¯å¾„
- `action` (string): æ“ä½œç±»å‹ï¼Œé»˜è®¤ä¸º'execute'
- `args` (dict): å¯é€‰å‚æ•°å­—å…¸

### ä½¿ç”¨ç¤ºä¾‹
```python
execute_menu_item(
    menu_path="File/Save Project"
)

execute_menu_item(
    menu_path="GameObject/Create Empty"
)

execute_menu_item(
    menu_path="Window/General/Inspector"
)
```

### å¸¸ç”¨èœå•è·¯å¾„
- "File/Save Project" - ä¿å­˜é¡¹ç›®
- "File/Save Scenes" - ä¿å­˜åœºæ™¯
- "GameObject/Create Empty" - åˆ›å»ºç©ºGameObject
- "Assets/Reimport All" - é‡æ–°å¯¼å…¥æ‰€æœ‰èµ„äº§
- "Window/General/Console" - æ‰“å¼€æ§åˆ¶å°çª—å£

---

## 3. ğŸ“ manage_asset - Unityèµ„äº§ç®¡ç†å·¥å…·

**åŠŸèƒ½**: æ‰§è¡ŒUnityèµ„äº§çš„å„ç§æ“ä½œï¼ŒåŒ…æ‹¬å¯¼å…¥ã€åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ç­‰ã€‚

### ä¸»è¦å‚æ•°
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
- `path` (string, å¿…éœ€): èµ„äº§è·¯å¾„
- `asset_type` (string): èµ„äº§ç±»å‹ï¼ˆåˆ›å»ºæ—¶éœ€è¦ï¼‰
- `properties` (dict): èµ„äº§å±æ€§
- `destination` (string): ç›®æ ‡è·¯å¾„ï¼ˆç§»åŠ¨/å¤åˆ¶æ—¶ï¼‰

### æ”¯æŒçš„æ“ä½œ (action)
- `import` - å¯¼å…¥èµ„äº§
- `create` - åˆ›å»ºèµ„äº§
- `modify` - ä¿®æ”¹èµ„äº§
- `delete` - åˆ é™¤èµ„äº§
- `duplicate` - å¤åˆ¶èµ„äº§
- `move` - ç§»åŠ¨èµ„äº§
- `rename` - é‡å‘½åèµ„äº§
- `search` - æœç´¢èµ„äº§
- `get_info` - è·å–èµ„äº§ä¿¡æ¯
- `create_folder` - åˆ›å»ºæ–‡ä»¶å¤¹

### ä½¿ç”¨ç¤ºä¾‹
```python
# åˆ›å»ºæè´¨
manage_asset(
    action="create",
    path="Assets/Materials/NewMaterial.mat",
    asset_type="Material",
    properties={"color": [1, 0, 0, 1]}
)

# åˆ›å»ºæ–‡ä»¶å¤¹
manage_asset(
    action="create_folder",
    path="Assets/NewFolder"
)

# æœç´¢é¢„åˆ¶ä½“
manage_asset(
    action="search",
    path="Assets/",
    search_pattern="*.prefab"
)

# è·å–èµ„äº§ä¿¡æ¯
manage_asset(
    action="get_info",
    path="Assets/Scripts/PlayerController.cs"
)
```

---

## 4. âš™ï¸ manage_editor - Unityç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†å·¥å…·

**åŠŸèƒ½**: æ§åˆ¶å’ŒæŸ¥è¯¢Unityç¼–è¾‘å™¨çš„çŠ¶æ€å’Œè®¾ç½®ã€‚

### å‚æ•°
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
- `wait_for_completion` (bool): æ˜¯å¦ç­‰å¾…å®Œæˆ
- `tool_name` (string): å·¥å…·åç§°
- `tag_name` (string): æ ‡ç­¾åç§°
- `layer_name` (string): å±‚åç§°

### æ”¯æŒçš„æ“ä½œ (action)
- `play` - æ’­æ”¾åœºæ™¯
- `pause` - æš‚åœåœºæ™¯
- `stop` - åœæ­¢åœºæ™¯
- `get_state` - è·å–ç¼–è¾‘å™¨çŠ¶æ€
- `set_active_tool` - è®¾ç½®æ´»åŠ¨å·¥å…·
- `add_tag` - æ·»åŠ æ ‡ç­¾
- `add_layer` - æ·»åŠ å±‚

### ä½¿ç”¨ç¤ºä¾‹
```python
# æ’­æ”¾åœºæ™¯
manage_editor(action="play")

# è·å–ç¼–è¾‘å™¨çŠ¶æ€
manage_editor(action="get_state")

# æ·»åŠ æ–°æ ‡ç­¾
manage_editor(
    action="add_tag",
    tag_name="Enemy"
)

# è®¾ç½®æ´»åŠ¨å·¥å…·
manage_editor(
    action="set_active_tool",
    tool_name="Move Tool"
)
```

---

## 5. ğŸ® manage_gameobject - GameObjectç®¡ç†å·¥å…·

**åŠŸèƒ½**: ç®¡ç†Unityä¸­çš„GameObjectï¼ŒåŒ…æ‹¬åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥æ‰¾å’Œç»„ä»¶æ“ä½œã€‚

### æ ¸å¿ƒå‚æ•°
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
- `target` (string): ç›®æ ‡GameObjectæ ‡è¯†ç¬¦
- `name` (string): GameObjectåç§°
- `tag` (string): æ ‡ç­¾
- `parent` (string): çˆ¶å¯¹è±¡
- `position` (list): ä½ç½®åæ ‡ [x, y, z]
- `rotation` (list): æ—‹è½¬ [x, y, z]
- `scale` (list): ç¼©æ”¾ [x, y, z]

### æ”¯æŒçš„æ“ä½œ (action)
- `create` - åˆ›å»ºGameObject
- `modify` - ä¿®æ”¹GameObject
- `delete` - åˆ é™¤GameObject
- `find` - æŸ¥æ‰¾GameObject
- `add_component` - æ·»åŠ ç»„ä»¶
- `remove_component` - ç§»é™¤ç»„ä»¶
- `set_component_property` - è®¾ç½®ç»„ä»¶å±æ€§

### ä½¿ç”¨ç¤ºä¾‹
```python
# åˆ›å»ºåŸºç¡€GameObject
manage_gameobject(
    action="create",
    name="Player",
    tag="Player",
    position=[0, 1, 0]
)

# åˆ›å»ºå¹¶ä¿å­˜ä¸ºé¢„åˆ¶ä½“
manage_gameobject(
    action="create",
    name="Enemy",
    primitive_type="Cube",
    save_as_prefab=True,
    prefab_path="Assets/Prefabs/Enemy.prefab"
)

# æ·»åŠ ç»„ä»¶
manage_gameobject(
    action="add_component",
    target="Player",
    component_name="Rigidbody"
)

# ä¿®æ”¹GameObjectå±æ€§
manage_gameobject(
    action="modify",
    target="Player",
    position=[10, 0, 0],
    set_active=True
)

# æŸ¥æ‰¾GameObject
manage_gameobject(
    action="find",
    search_term="Player",
    find_all=True
)
```

### ç»„ä»¶å±æ€§è®¾ç½®
```python
# è®¾ç½®å¤æ‚ç»„ä»¶å±æ€§
manage_gameobject(
    action="modify",
    target="Player",
    component_properties={
        "Rigidbody": {
            "mass": 10.0,
            "useGravity": True
        },
        "MeshRenderer": {
            "material": "Assets/Materials/PlayerMaterial.mat"
        }
    }
)
```

---

## 6. ğŸ  manage_scene - Unityåœºæ™¯ç®¡ç†å·¥å…·

**åŠŸèƒ½**: ç®¡ç†Unityåœºæ™¯ï¼ŒåŒ…æ‹¬åŠ è½½ã€ä¿å­˜ã€åˆ›å»ºå’Œè·å–å±‚çº§ç»“æ„ã€‚

### å‚æ•°
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
- `name` (string, å¿…éœ€): åœºæ™¯åç§°
- `path` (string, å¿…éœ€): èµ„äº§è·¯å¾„
- `build_index` (int, å¿…éœ€): æ„å»ºç´¢å¼•

### æ”¯æŒçš„æ“ä½œ (action)
- `load` - åŠ è½½åœºæ™¯
- `save` - ä¿å­˜åœºæ™¯
- `create` - åˆ›å»ºåœºæ™¯
- `get_hierarchy` - è·å–åœºæ™¯å±‚çº§

### ä½¿ç”¨ç¤ºä¾‹
```python
# åˆ›å»ºæ–°åœºæ™¯
manage_scene(
    action="create",
    name="NewLevel",
    path="Assets/Scenes/",
    build_index=1
)

# åŠ è½½åœºæ™¯
manage_scene(
    action="load",
    name="MainMenu",
    path="Assets/Scenes/MainMenu.unity",
    build_index=0
)

# ä¿å­˜å½“å‰åœºæ™¯
manage_scene(
    action="save",
    name="CurrentScene",
    path="Assets/Scenes/",
    build_index=0
)

# è·å–åœºæ™¯å±‚çº§ç»“æ„
manage_scene(
    action="get_hierarchy",
    name="CurrentScene",
    path="",
    build_index=0
)
```

---

## 7. ğŸ“ manage_script - C#è„šæœ¬ç®¡ç†å·¥å…·

**åŠŸèƒ½**: ç®¡ç†Unityä¸­çš„C#è„šæœ¬ï¼ŒåŒ…æ‹¬åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤ã€‚

### å‚æ•°
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
- `name` (string, å¿…éœ€): è„šæœ¬åç§°ï¼ˆä¸å«.csæ‰©å±•åï¼‰
- `path` (string, å¿…éœ€): èµ„äº§è·¯å¾„
- `contents` (string, å¿…éœ€): C#ä»£ç å†…å®¹
- `script_type` (string, å¿…éœ€): è„šæœ¬ç±»å‹
- `namespace` (string, å¿…éœ€): å‘½åç©ºé—´

### æ”¯æŒçš„æ“ä½œ (action)
- `create` - åˆ›å»ºè„šæœ¬
- `read` - è¯»å–è„šæœ¬
- `update` - æ›´æ–°è„šæœ¬
- `delete` - åˆ é™¤è„šæœ¬

### ä½¿ç”¨ç¤ºä¾‹
```python
# åˆ›å»ºMonoBehaviourè„šæœ¬
manage_script(
    action="create",
    name="PlayerController",
    path="Assets/Scripts/",
    contents='''using UnityEngine;

public class PlayerController : MonoBehaviour
{
    public float speed = 5f;
    
    void Update()
    {
        float horizontal = Input.GetAxis("Horizontal");
        float vertical = Input.GetAxis("Vertical");
        
        Vector3 movement = new Vector3(horizontal, 0, vertical) * speed * Time.deltaTime;
        transform.Translate(movement);
    }
}''',
    script_type="MonoBehaviour",
    namespace=""
)

# è¯»å–ç°æœ‰è„šæœ¬
manage_script(
    action="read",
    name="PlayerController",
    path="Assets/Scripts/",
    contents="",
    script_type="",
    namespace=""
)

# æ›´æ–°è„šæœ¬å†…å®¹
manage_script(
    action="update",
    name="PlayerController",
    path="Assets/Scripts/",
    contents="// æ›´æ–°åçš„ä»£ç å†…å®¹",
    script_type="MonoBehaviour",
    namespace=""
)
```

---

## 8. ğŸ“‹ read_console - Unityæ§åˆ¶å°è¯»å–å·¥å…·

**åŠŸèƒ½**: è¯»å–æˆ–æ¸…ç©ºUnityç¼–è¾‘å™¨æ§åˆ¶å°æ¶ˆæ¯ã€‚

### å‚æ•°
- `action` (string): æ“ä½œç±»å‹ï¼Œé»˜è®¤'get'
- `types` (list): æ¶ˆæ¯ç±»å‹åˆ—è¡¨ï¼Œé»˜è®¤['error', 'warning', 'log']
- `count` (int): æœ€å¤§è¿”å›æ¶ˆæ¯æ•°
- `filter_text` (string): æ–‡æœ¬è¿‡æ»¤å™¨
- `since_timestamp` (string): æ—¶é—´æˆ³è¿‡æ»¤å™¨(ISO 8601æ ¼å¼)
- `format` (string): è¾“å‡ºæ ¼å¼ï¼Œé»˜è®¤'detailed'
- `include_stacktrace` (bool): æ˜¯å¦åŒ…å«å †æ ˆè·Ÿè¸ªï¼Œé»˜è®¤True

### æ”¯æŒçš„æ“ä½œ (action)
- `get` - è·å–æ§åˆ¶å°æ¶ˆæ¯
- `clear` - æ¸…ç©ºæ§åˆ¶å°

### æ¶ˆæ¯ç±»å‹ (types)
- `error` - é”™è¯¯æ¶ˆæ¯
- `warning` - è­¦å‘Šæ¶ˆæ¯
- `log` - æ—¥å¿—æ¶ˆæ¯
- `all` - æ‰€æœ‰æ¶ˆæ¯

### è¾“å‡ºæ ¼å¼ (format)
- `plain` - çº¯æ–‡æœ¬æ ¼å¼
- `detailed` - è¯¦ç»†æ ¼å¼
- `json` - JSONæ ¼å¼

### ä½¿ç”¨ç¤ºä¾‹
```python
# è·å–æ‰€æœ‰ç±»å‹çš„æœ€æ–°10æ¡æ¶ˆæ¯
read_console(
    action="get",
    types=["error", "warning", "log"],
    count=10
)

# åªè·å–é”™è¯¯æ¶ˆæ¯
read_console(
    action="get",
    types=["error"],
    include_stacktrace=True
)

# æŒ‰æ–‡æœ¬è¿‡æ»¤æ¶ˆæ¯
read_console(
    action="get",
    filter_text="NullReferenceException",
    types=["error"]
)

# æ¸…ç©ºæ§åˆ¶å°
read_console(action="clear")

# è·å–ç‰¹å®šæ—¶é—´åçš„æ¶ˆæ¯
read_console(
    action="get",
    since_timestamp="2024-01-01T10:00:00Z",
    format="json"
)
```

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### 1. å·¥å…·é€‰æ‹©åŸåˆ™
- å•ä¸ªå‡½æ•°è°ƒç”¨ä½¿ç”¨ `function_call`
- æ‰¹é‡æ“ä½œä½¿ç”¨ `functions_call`
- ç‰¹å®šåŠŸèƒ½ä½¿ç”¨å¯¹åº”çš„ä¸“ä¸šå·¥å…·

### 2. é”™è¯¯å¤„ç†
æ‰€æœ‰å·¥å…·éƒ½è¿”å›æ ‡å‡†æ ¼å¼ï¼š
```json
{
    "success": bool,
    "message": string,
    "data": object,
    "error": string  // å¤±è´¥æ—¶å­˜åœ¨
}
```

### 3. è·¯å¾„çº¦å®š
- ä½¿ç”¨Unityæ ‡å‡†è·¯å¾„æ ¼å¼ï¼š`Assets/Folder/File.extension`
- è·¯å¾„åˆ†éš”ç¬¦ä½¿ç”¨æ­£æ–œæ  `/`
- ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„Assetsæ–‡ä»¶å¤¹

### 4. æœ€ä½³å®è·µ
- åœ¨æ‰§è¡Œæ“ä½œå‰ä½¿ç”¨ `read_console` æ£€æŸ¥é”™è¯¯
- ä½¿ç”¨ `manage_editor` è·å–ç¼–è¾‘å™¨çŠ¶æ€
- åˆ›å»ºèµ„äº§å‰ç¡®ä¿ç›®æ ‡æ–‡ä»¶å¤¹å­˜åœ¨
- æ‰¹é‡æ“ä½œæ—¶ä½¿ç”¨ `functions_call` æé«˜æ•ˆç‡

### 5. è°ƒè¯•å»ºè®®
- ä½¿ç”¨ `read_console` æŸ¥çœ‹Unityæ§åˆ¶å°è¾“å‡º
- æ£€æŸ¥è¿”å›å€¼ä¸­çš„ `success` å­—æ®µ
- æŸ¥çœ‹ `message` å’Œ `error` å­—æ®µè·å–è¯¦ç»†ä¿¡æ¯ 