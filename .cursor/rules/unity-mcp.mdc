---
description:
globs:
alwaysApply: true
---
# Unity MCP å·¥å…·è§„åˆ™ (mcp_rules)

æœ¬æ–‡æ¡£å°†å·¥å…·æŒ‰ä¸¤ç±»åˆ’åˆ†ï¼š
- Tools: `function_call`, `functions_call`ï¼ˆè°ƒç”¨/æ‰¹é‡è°ƒç”¨ Methodsï¼‰ã€‚
- Methods: `execute_menu_item`, `manage_asset`, `manage_editor`, `manage_gameobject`, `manage_scene`, `manage_script`, `read_console`ï¼ˆå‡ä½œä¸º `func` ä¼ ç»™ Toolsï¼‰ã€‚

é™¤ `function_call` ä¸ `functions_call` å¤–ï¼Œå…¶ä½™å‡ä¸º Methods åç§°ï¼Œä¸ç›´æ¥è°ƒç”¨ï¼›è¯·é€šè¿‡ Tools è°ƒç”¨ï¼Œå¹¶æŠŠæ–¹æ³•å‚æ•°æ”¾å…¥ `args`ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰ã€‚

## ğŸ—‚ï¸ ç›®å½•
- Tools
  - `function_call`
  - `functions_call`
- Methods
  - `execute_menu_item`
  - `manage_asset`
  - `manage_editor`
  - `manage_gameobject`
  - `manage_scene`
  - `manage_script`
  - `read_console`
- ä½¿ç”¨æŒ‡å—

---

## ğŸ”§ Tools

### function_call - å•æ¬¡å‡½æ•°è°ƒç”¨å·¥å…·
**åŠŸèƒ½**: è°ƒç”¨ä¸€æ¬¡ Unity MCP æ–¹æ³•ã€‚

å‚æ•°
- `func` (string, å¿…éœ€): æ–¹æ³•åï¼ˆè§ Methods åˆ—è¡¨ï¼‰ã€‚
- `args` (string, å¿…éœ€): ä¼ å…¥æ–¹æ³•çš„ JSON å­—ç¬¦ä¸²å‚æ•°ã€‚

è¿”å›å€¼æ ¼å¼
```json
{
  "success": true,
  "message": "...",
  "data": { },
  "error": ""
}
```

ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ª Cube
```python
function_call(
  func="manage_gameobject",
  args="{\"action\":\"create\",\"name\":\"Cube\",\"primitive_type\":\"Cube\",\"position\":[0,0,0]}"
)
```

---

### functions_call - æ‰¹é‡å‡½æ•°è°ƒç”¨å·¥å…·
**åŠŸèƒ½**: æŒ‰é¡ºåºæ‰§è¡Œå¤šä¸ª Unity MCP æ–¹æ³•è°ƒç”¨å¹¶æ”¶é›†æ‰€æœ‰è¿”å›å€¼ã€‚

å‚æ•°
- `function_calls` (string): å‡½æ•°è°ƒç”¨åˆ—è¡¨ JSON å­—ç¬¦ä¸²ã€‚

å‚æ•°æ ¼å¼
```json
[
  { "func": "manage_gameobject", "args": "{\"action\":\"create\",\"name\":\"Enemy\",\"primitive_type\":\"Cube\"}" },
  { "func": "manage_gameobject", "args": "{\"action\":\"add_component\",\"target\":\"Enemy\",\"component_name\":\"Rigidbody\"}" }
]
```

è¿”å›å€¼æ ¼å¼
```json
{
  "success": true,
  "results": [ ... ],
  "errors": [ ... ],
  "total_calls": 2,
  "successful_calls": 2,
  "failed_calls": 0
}
```

ç¤ºä¾‹ï¼šæ‰¹é‡åˆ›å»ºå¹¶æ·»åŠ ç»„ä»¶
```python
functions_call(
  function_calls='[
    {"func":"manage_gameobject","args":"{\\"action\\":\\"create\\",\\"name\\":\\"Enemy\\",\\"primitive_type\\":\\"Cube\\"}"},
    {"func":"manage_gameobject","args":"{\\"action\\":\\"add_component\\",\\"target\\":\\"Enemy\\",\\"component_name\\":\\"Rigidbody\\"}"}
  ]'
)
```

---

## ğŸ§© Methods
> é€šè¿‡ Tools è°ƒç”¨ä»¥ä¸‹æ–¹æ³•ï¼š
> - å•æ¬¡ï¼šä½¿ç”¨ `function_call`ï¼Œè®¾ç½® `func` ä¸ºæ–¹æ³•åï¼Œ`args` ä¸ºæ–¹æ³•å‚æ•° JSON å­—ç¬¦ä¸²ã€‚
> - æ‰¹é‡ï¼šä½¿ç”¨ `functions_call`ï¼ŒæŠŠå¤šæ¡ `{func, args}` æ”¾å…¥ `function_calls`ã€‚

### execute_menu_item - Unityç¼–è¾‘å™¨èœå•æ‰§è¡Œ
**åŠŸèƒ½**: æ‰§è¡ŒUnityç¼–è¾‘å™¨ä¸­çš„èœå•å‘½ä»¤ã€‚

ä¸»è¦å‚æ•°ï¼ˆæ”¾å…¥ `args`ï¼‰
- `action` (string): æ“ä½œç±»å‹ï¼Œé»˜è®¤ `execute`
- `menu_path` (string, å¿…éœ€): èœå•é¡¹å®Œæ•´è·¯å¾„

ç¤ºä¾‹ï¼š
```python
function_call(
  func="execute_menu_item",
  args="{\"action\":\"execute\",\"menu_path\":\"File/Save Project\"}"
)
```

å¸¸ç”¨èœå•è·¯å¾„
- "File/Save Project" - ä¿å­˜é¡¹ç›®
- "File/Save Scenes" - ä¿å­˜åœºæ™¯
- "GameObject/Create Empty" - åˆ›å»ºç©ºGameObject
- "Assets/Reimport All" - é‡æ–°å¯¼å…¥æ‰€æœ‰èµ„äº§
- "Window/General/Console" - æ‰“å¼€æ§åˆ¶å°çª—å£

---

### manage_asset - Unityèµ„äº§ç®¡ç†
**åŠŸèƒ½**: æ‰§è¡ŒUnityèµ„äº§çš„å„ç§æ“ä½œï¼ŒåŒ…æ‹¬å¯¼å…¥ã€åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ç­‰ã€‚

ä¸»è¦å‚æ•°ï¼ˆæ”¾å…¥ `args`ï¼‰
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹ï¼Œå¦‚ `create`/`import`/`move` ç­‰
- `path` (string, å¿…éœ€): èµ„äº§è·¯å¾„
- `asset_type` (string): èµ„äº§ç±»å‹ï¼ˆåˆ›å»ºæ—¶éœ€è¦ï¼‰
- `properties` (dict): èµ„äº§å±æ€§
- `destination` (string): ç›®æ ‡è·¯å¾„ï¼ˆç§»åŠ¨/å¤åˆ¶æ—¶ï¼‰

ç¤ºä¾‹ï¼šåˆ›å»ºæè´¨
```python
function_call(
  func="manage_asset",
  args="{\"action\":\"create\",\"path\":\"Assets/Materials/NewMaterial.mat\",\"asset_type\":\"Material\",\"properties\":{\"color\":[1,0,0,1]}}"
)
```

ç¤ºä¾‹ï¼šåˆ›å»ºæ–‡ä»¶å¤¹
```python
function_call(
  func="manage_asset",
  args="{\"action\":\"create_folder\",\"path\":\"Assets/NewFolder\"}"
)
```

ç¤ºä¾‹ï¼šæœç´¢é¢„åˆ¶ä½“
```python
function_call(
  func="manage_asset",
  args="{\"action\":\"search\",\"path\":\"Assets/\",\"search_pattern\":\"*.prefab\"}"
)
```

ç¤ºä¾‹ï¼šè·å–èµ„äº§ä¿¡æ¯
```python
function_call(
  func="manage_asset",
  args="{\"action\":\"get_info\",\"path\":\"Assets/Scripts/PlayerController.cs\"}"
)
```

---

### manage_editor - Unityç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†
**åŠŸèƒ½**: æ§åˆ¶å’ŒæŸ¥è¯¢Unityç¼–è¾‘å™¨çš„çŠ¶æ€å’Œè®¾ç½®ã€‚

ä¸»è¦å‚æ•°ï¼ˆæ”¾å…¥ `args`ï¼‰
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
- `wait_for_completion` (bool): æ˜¯å¦ç­‰å¾…å®Œæˆ
- `tool_name` (string): å·¥å…·åç§°
- `tag_name` (string): æ ‡ç­¾åç§°
- `layer_name` (string): å±‚åç§°

æ”¯æŒçš„æ“ä½œ (action)
- `play` - æ’­æ”¾åœºæ™¯
- `pause` - æš‚åœåœºæ™¯
- `stop` - åœæ­¢åœºæ™¯
- `get_state` - è·å–ç¼–è¾‘å™¨çŠ¶æ€
- `set_active_tool` - è®¾ç½®æ´»åŠ¨å·¥å…·
- `add_tag` - æ·»åŠ æ ‡ç­¾
- `add_layer` - æ·»åŠ å±‚

ç¤ºä¾‹ï¼šæ’­æ”¾åœºæ™¯
```python
function_call(
  func="manage_editor",
  args="{\"action\":\"play\"}"
)
```

ç¤ºä¾‹ï¼šè·å–ç¼–è¾‘å™¨çŠ¶æ€
```python
function_call(
  func="manage_editor",
  args="{\"action\":\"get_state\"}"
)
```

ç¤ºä¾‹ï¼šæ·»åŠ æ ‡ç­¾
```python
function_call(
  func="manage_editor",
  args="{\"action\":\"add_tag\",\"tag_name\":\"Enemy\"}"
)
```

ç¤ºä¾‹ï¼šè®¾ç½®æ´»åŠ¨å·¥å…·
```python
function_call(
  func="manage_editor",
  args="{\"action\":\"set_active_tool\",\"tool_name\":\"Move Tool\"}"
)
```

---

### manage_gameobject - GameObject ç®¡ç†
**åŠŸèƒ½**: ç®¡ç†Unityä¸­çš„GameObjectï¼ŒåŒ…æ‹¬åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥æ‰¾å’Œç»„ä»¶æ“ä½œã€‚

æ ¸å¿ƒå‚æ•°ï¼ˆæ”¾å…¥ `args`ï¼‰
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
- `target` (string): ç›®æ ‡GameObjectæ ‡è¯†ç¬¦
- `name` (string): GameObjectåç§°
- `tag` (string): æ ‡ç­¾
- `parent` (string): çˆ¶å¯¹è±¡
- `position` (list): ä½ç½®åæ ‡ [x, y, z]
- `rotation` (list): æ—‹è½¬ [x, y, z]
- `scale` (list): ç¼©æ”¾ [x, y, z]

æ”¯æŒçš„æ“ä½œ (action)
- `create` - åˆ›å»ºGameObject
- `modify` - ä¿®æ”¹GameObject
- `delete` - åˆ é™¤GameObject
- `find` - æŸ¥æ‰¾GameObject
- `add_component` - æ·»åŠ ç»„ä»¶
- `remove_component` - ç§»é™¤ç»„ä»¶
- `set_component_property` - è®¾ç½®ç»„ä»¶å±æ€§

ç¤ºä¾‹ï¼šåˆ›å»ºåŸºç¡€ GameObject
```python
function_call(
  func="manage_gameobject",
  args="{\"action\":\"create\",\"name\":\"Player\",\"tag\":\"Player\",\"position\":[0,1,0]}"
)
```

ç¤ºä¾‹ï¼šåˆ›å»ºå¹¶ä¿å­˜ä¸ºé¢„åˆ¶ä½“
```python
function_call(
  func="manage_gameobject",
  args="{\"action\":\"create\",\"name\":\"Enemy\",\"primitive_type\":\"Cube\",\"save_as_prefab\":true,\"prefab_path\":\"Assets/Prefabs/Enemy.prefab\"}"
)
```

ç¤ºä¾‹ï¼šæ·»åŠ ç»„ä»¶
```python
function_call(
  func="manage_gameobject",
  args="{\"action\":\"add_component\",\"target\":\"Player\",\"component_name\":\"Rigidbody\"}"
)
```

ç¤ºä¾‹ï¼šä¿®æ”¹ GameObject å±æ€§
```python
function_call(
  func="manage_gameobject",
  args="{\"action\":\"modify\",\"target\":\"Player\",\"position\":[10,0,0],\"set_active\":true}"
)
```

ç¤ºä¾‹ï¼šæŸ¥æ‰¾ GameObject
```python
function_call(
  func="manage_gameobject",
  args="{\"action\":\"find\",\"search_term\":\"Player\",\"find_all\":true}"
)
```

ç»„ä»¶å±æ€§è®¾ç½®
```python
function_call(
  func="manage_gameobject",
  args="{\"action\":\"modify\",\"target\":\"Player\",\"component_properties\":{\"Rigidbody\":{\"mass\":10.0,\"useGravity\":true},\"MeshRenderer\":{\"material\":\"Assets/Materials/PlayerMaterial.mat\"}}}"
)
```

---

### manage_scene - åœºæ™¯ç®¡ç†
**åŠŸèƒ½**: ç®¡ç†Unityåœºæ™¯ï¼ŒåŒ…æ‹¬åŠ è½½ã€ä¿å­˜ã€åˆ›å»ºå’Œè·å–å±‚çº§ç»“æ„ã€‚

ä¸»è¦å‚æ•°ï¼ˆæ”¾å…¥ `args`ï¼‰
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
- `name` (string, å¿…éœ€): åœºæ™¯åç§°
- `path` (string, å¿…éœ€): èµ„äº§è·¯å¾„
- `build_index` (int, å¿…éœ€): æ„å»ºç´¢å¼•

æ”¯æŒçš„æ“ä½œ (action)
- `load` - åŠ è½½åœºæ™¯
- `save` - ä¿å­˜åœºæ™¯
- `create` - åˆ›å»ºåœºæ™¯
- `get_hierarchy` - è·å–åœºæ™¯å±‚çº§

ç¤ºä¾‹ï¼šåˆ›å»ºæ–°åœºæ™¯
```python
function_call(
  func="manage_scene",
  args="{\"action\":\"create\",\"name\":\"NewLevel\",\"path\":\"Assets/Scenes/\",\"build_index\":1}"
)
```

ç¤ºä¾‹ï¼šåŠ è½½åœºæ™¯
```python
function_call(
  func="manage_scene",
  args="{\"action\":\"load\",\"name\":\"MainMenu\",\"path\":\"Assets/Scenes/MainMenu.unity\",\"build_index\":0}"
)
```

ç¤ºä¾‹ï¼šä¿å­˜å½“å‰åœºæ™¯
```python
function_call(
  func="manage_scene",
  args="{\"action\":\"save\",\"name\":\"CurrentScene\",\"path\":\"Assets/Scenes/\",\"build_index\":0}"
)
```

ç¤ºä¾‹ï¼šè·å–åœºæ™¯å±‚çº§ç»“æ„
```python
function_call(
  func="manage_scene",
  args="{\"action\":\"get_hierarchy\",\"name\":\"CurrentScene\",\"path\":\"\",\"build_index\":0}"
)
```

---

### manage_script - C#è„šæœ¬ç®¡ç†
**åŠŸèƒ½**: ç®¡ç†Unityä¸­çš„C#è„šæœ¬ï¼ŒåŒ…æ‹¬åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤ã€‚

ä¸»è¦å‚æ•°ï¼ˆæ”¾å…¥ `args`ï¼‰
- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
- `name` (string, å¿…éœ€): è„šæœ¬åç§°ï¼ˆä¸å«.csæ‰©å±•åï¼‰
- `path` (string, å¿…éœ€): èµ„äº§è·¯å¾„
- `contents` (string, å¿…éœ€): C#ä»£ç å†…å®¹
- `script_type` (string, å¿…éœ€): è„šæœ¬ç±»å‹
- `namespace` (string, å¿…éœ€): å‘½åç©ºé—´

æ”¯æŒçš„æ“ä½œ (action)
- `create` - åˆ›å»ºè„šæœ¬
- `read` - è¯»å–è„šæœ¬
- `update` - æ›´æ–°è„šæœ¬
- `delete` - åˆ é™¤è„šæœ¬

ç¤ºä¾‹ï¼šåˆ›å»º MonoBehaviour è„šæœ¬
```python
function_call(
  func="manage_script",
  args="{\"action\":\"create\",\"name\":\"PlayerController\",\"path\":\"Assets/Scripts/\",\"contents\":\"using UnityEngine;\\n\\npublic class PlayerController : MonoBehaviour { public float speed = 5f; void Update(){ float h = Input.GetAxis(\\\"Horizontal\\\"); float v = Input.GetAxis(\\\"Vertical\\\"); Vector3 movement = new Vector3(h,0,v) * speed * Time.deltaTime; transform.Translate(movement);} }\",\"script_type\":\"MonoBehaviour\",\"namespace\":\"\"}"
)
```

ç¤ºä¾‹ï¼šè¯»å–ç°æœ‰è„šæœ¬
```python
function_call(
  func="manage_script",
  args="{\"action\":\"read\",\"name\":\"PlayerController\",\"path\":\"Assets/Scripts/\"}"
)
```

ç¤ºä¾‹ï¼šæ›´æ–°è„šæœ¬å†…å®¹
```python
function_call(
  func="manage_script",
  args="{\"action\":\"update\",\"name\":\"PlayerController\",\"path\":\"Assets/Scripts/\",\"contents\":\"// æ›´æ–°åçš„ä»£ç å†…å®¹\",\"script_type\":\"MonoBehaviour\",\"namespace\":\"\"}"
)
```

---

### read_console - Unity æ§åˆ¶å°è¯»å–
**åŠŸèƒ½**: è¯»å–æˆ–æ¸…ç©ºUnityç¼–è¾‘å™¨æ§åˆ¶å°æ¶ˆæ¯ã€‚

ä¸»è¦å‚æ•°ï¼ˆæ”¾å…¥ `args`ï¼‰
- `action` (string): æ“ä½œç±»å‹ï¼Œé»˜è®¤ `get`
- `types` (list): æ¶ˆæ¯ç±»å‹åˆ—è¡¨ï¼Œé»˜è®¤ ['error','warning','log']
- `count` (int): æœ€å¤§è¿”å›æ¶ˆæ¯æ•°
- `filter_text` (string): æ–‡æœ¬è¿‡æ»¤å™¨
- `since_timestamp` (string): æ—¶é—´æˆ³è¿‡æ»¤å™¨(ISO 8601)
- `format` (string): è¾“å‡ºæ ¼å¼ï¼Œé»˜è®¤ `detailed`
- `include_stacktrace` (bool): æ˜¯å¦åŒ…å«å †æ ˆè·Ÿè¸ªï¼Œé»˜è®¤ true

æ”¯æŒçš„æ“ä½œ (action)
- `get` - è·å–æ§åˆ¶å°æ¶ˆæ¯
- `clear` - æ¸…ç©ºæ§åˆ¶å°

è¾“å‡ºæ ¼å¼ (format)
- `plain` - çº¯æ–‡æœ¬æ ¼å¼
- `detailed` - è¯¦ç»†æ ¼å¼
- `json` - JSONæ ¼å¼

ç¤ºä¾‹ï¼šè·å–æ‰€æœ‰ç±»å‹çš„æœ€æ–° 10 æ¡
```python
function_call(
  func="read_console",
  args="{\"action\":\"get\",\"types\":[\"error\",\"warning\",\"log\"],\"count\":10}"
)
```

ç¤ºä¾‹ï¼šåªè·å–é”™è¯¯å¹¶å¸¦å †æ ˆ
```python
function_call(
  func="read_console",
  args="{\"action\":\"get\",\"types\":[\"error\"],\"include_stacktrace\":true}"
)
```

ç¤ºä¾‹ï¼šæ¸…ç©ºæ§åˆ¶å°
```python
function_call(
  func="read_console",
  args="{\"action\":\"clear\"}"
)
```

ç¤ºä¾‹ï¼šæŒ‰æ—¶é—´è¿‡æ»¤å¹¶ä»¥ JSON è¿”å›
```python
function_call(
  func="read_console",
  args="{\"action\":\"get\",\"since_timestamp\":\"2024-01-01T10:00:00Z\",\"format\":\"json\"}"
)
```

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### 1) å·¥å…·é€‰æ‹©åŸåˆ™
- å•æ¬¡è°ƒç”¨ä½¿ç”¨ `function_call`
- æ‰¹é‡è°ƒç”¨ä½¿ç”¨ `functions_call`
- é™¤ `function_call`/`functions_call` å¤–ï¼Œå…¶ä½™å‡ä¸º Methods åç§°ï¼Œä½œä¸º `func` ä¼ å…¥

### 2) é”™è¯¯å¤„ç†
æ‰€æœ‰è°ƒç”¨å‡è¿”å›æ ‡å‡†æ ¼å¼ï¼š
```json
{
  "success": true,
  "message": "...",
  "data": { },
  "error": ""
}
```

### 3) è·¯å¾„çº¦å®š
- ä½¿ç”¨Unityæ ‡å‡†è·¯å¾„æ ¼å¼ï¼š`Assets/Folder/File.extension`
- è·¯å¾„åˆ†éš”ç¬¦ä½¿ç”¨æ­£æ–œæ  `/`
- ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„Assetsæ–‡ä»¶å¤¹

### 4) æœ€ä½³å®è·µ
- åœ¨æ‰§è¡Œæ“ä½œå‰ä½¿ç”¨ `read_console` æ£€æŸ¥é”™è¯¯
- ä½¿ç”¨ `manage_editor` è·å–ç¼–è¾‘å™¨çŠ¶æ€
- åˆ›å»ºèµ„äº§å‰ç¡®ä¿ç›®æ ‡æ–‡ä»¶å¤¹å­˜åœ¨
- æ‰¹é‡æ“ä½œæ—¶ä½¿ç”¨ `functions_call` æé«˜æ•ˆç‡

### 5) è°ƒè¯•å»ºè®®
- ä½¿ç”¨ `read_console` æŸ¥çœ‹Unityæ§åˆ¶å°è¾“å‡º
- æ£€æŸ¥è¿”å›å€¼ä¸­çš„ `success` å­—æ®µ
- æŸ¥çœ‹ `message` å’Œ `error` å­—æ®µè·å–è¯¦ç»†ä¿¡æ¯ 